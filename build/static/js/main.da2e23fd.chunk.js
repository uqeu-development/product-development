(this["webpackJsonpproduct-generator"]=this["webpackJsonpproduct-generator"]||[]).push([[0],{15:function(e,t){},31:function(e,t,r){},32:function(e,t,r){},38:function(e,t){},39:function(e,t){},58:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(24),s=r.n(a),i=(r(31),r(32),r(5)),o=r(0),u=c.a.createContext(),l=function(e){var t=e.children,r=Object(n.useState)("waiting on file upload..."),c=Object(i.a)(r,2),a=c[0],s=c[1],l=Object(n.useState)(""),p=Object(i.a)(l,2),d=p[0],f=p[1],j=Object(n.useState)(""),b=Object(i.a)(j,2),O=b[0],v=b[1],h=Object(n.useState)(""),x=Object(i.a)(h,2),m=x[0],g=x[1],S=Object(n.useState)([]),w=Object(i.a)(S,2),k=w[0],y=w[1],_=Object(n.useState)({}),F=Object(i.a)(_,2),q=F[0],N=F[1];return Object(o.jsx)(u.Provider,{value:{consoleMsg:a,setConsoleMsg:s,file:d,setFile:f,output:O,setOutput:v,fileData:m,setFileData:g,skus:k,setSkus:y,json:q,setJson:N},children:t})},p=function(){return Object(n.useContext)(u)},d=function(){var e=Object(n.useRef)(),t=p().consoleMsg;return Object(n.useEffect)((function(){var r="<pre>".concat(t,"</pre>");e.current.innerHTML+=r}),[t]),Object(o.jsx)("div",{className:"console",ref:e})},f=r(12),j=r.n(f),b=function(){var e=p(),t=e.file,r=e.setFile,c=e.setConsoleMsg,a=e.setFileData;return Object(n.useEffect)((function(){if(""!==t){var e=new FileReader;e.readAsBinaryString(t),e.onload=function(e){var t=e.target.result,r=j.a.read(t,{type:"binary"}),n=j.a.utils.sheet_to_json(r.Sheets.Sheet1);c("converting XLSX to JSON..."),a(n)}}}),[t]),Object(o.jsxs)("div",{className:"input-container",children:[Object(o.jsx)("h3",{children:"Upload file"}),Object(o.jsxs)("p",{children:["Download template ",Object(o.jsx)("a",{href:"/",target:"_blank",children:"here"}),"."]}),Object(o.jsx)("input",{type:"file",onChange:function(e){return function(e){var t=e.target.files[0];r(t),c("".concat(t.name," uploaded..."))}(e)}})]})},O=r(2),v=r.n(O),h=r(4),x=r(8),m=r(7),g=r(25),S=(r(6),{GB:{}});window.location.href.includes("prodtest");var w=r(26),k=r.n(w),y=function(){var e=Object(n.useRef)(),t=p(),r=t.fileData,c=t.skus,a=t.setSkus,s=t.setConsoleMsg,u=t.setJson,l=t.json,d=Object(n.useState)(""),f=Object(i.a)(d,2),j=f[0],b=f[1],O=Object(n.useState)(!0),w=Object(i.a)(O,2),y=w[0],_=w[1];Object(n.useEffect)((function(){if(""!==r){s("formating...");for(var e={},t=0;t<r.length;t++)for(var n=0;n<Object.keys(S).length;n++){var c=Object.keys(S)[n];r[t]=Object(m.a)(Object(m.a)({},r[t]),{},Object(x.a)({},c,{})),e[r[t].sku]=r[t]}a(r)}}),[r]);var F=function(){var e=Object(h.a)(v.a.mark((function e(t,r){var n,c,a,s,i,o,u,l,p,d,f,j,O,h,x,m,g,S,w,y,_,F,q;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",c="",a="",s="",i="",o="",u="",l="",p="",e.prev=9,w=new DOMParser,e.next=13,k.a.get(t);case 13:return y=e.sent,_=w.parseFromString(y.data,"text/html"),p=null===(d=_.querySelector("[data-dlmasterid]"))||void 0===d||null===(f=d.dataset)||void 0===f?void 0:f.dlmasterid,n=null===(j=_.querySelector(".productTile__link"))||void 0===j?void 0:j.title,c=(null===(O=_.querySelector(".product-standard-price"))||void 0===O?void 0:O.innerText)||(null===(h=_.querySelector(".product-current-price"))||void 0===h?void 0:h.innerText),a=(null===(x=_.querySelector(".product-sales-price"))||void 0===x?void 0:x.innerText)||"",s=null===(m=_.querySelector(".productTile__swatchList"))||void 0===m?void 0:m.innerHTML,i=null===(g=_.querySelector(".productTile__image"))||void 0===g?void 0:g.src,o=null===(S=_.querySelector(".productTile__link"))||void 0===S?void 0:S.href,o="https://www.uniqlo.com"+(o=new URL(o)).pathname,"GB"===r?(u=parseFloat(c.replace("\xa3","")),l=parseFloat(a.replace("\xa3",""))):"DK"===r?(u=parseFloat(c.replace("DKK","")),l=parseFloat(a.replace("DKK",""))):"SE"===r?(u=parseFloat(c.replace("kr","")),l=parseFloat(a.replace("kr",""))):(F=c.replace(",","."),q=a.replace(",","."),u=parseFloat(F.replace("\u20ac","")),l=parseFloat(q.replace("\u20ac",""))),e.abrupt("return",{sku:p,name:n,price:c,salePrice:a,price_int:u,salePrice_int:l,image:i,url:o,swatches:s});case 28:e.prev=28,e.t0=e.catch(9),b(t),console.log(e.t0);case 32:return e.abrupt("return",{name:n,price:c,salePrice:a,price_int:u,salePrice_int:l,image:i,url:o,swatches:s});case 33:case"end":return e.stop()}}),e,null,[[9,28]])})));return function(t,r){return e.apply(this,arguments)}}(),q=function(){var e=Object(h.a)(v.a.mark((function e(){var t,r,n,a,i,o,l,p,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s("".concat(c.length," skus...")),c,t=["GB"],r=[],n=!0,a=!1,e.prev=6,o=v.a.mark((function e(){var t,n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s("fetching products for ".concat(t=d,"...")),n="https://www.uniqlo.com/on/demandware.store/Sites-".concat(t,"-Site/default/Recommendations-Ajax?item0="),e.next=5,c.map(function(){var e=Object(h.a)(v.a.mark((function e(a,s){var i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(n+a.sku,t);case 2:i=e.sent,r.push(Object(m.a)(Object(m.a)({},i),c[s]));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 5:return a=e.sent,e.next=8,Promise.all(a);case 8:e.sent,u(r);case 10:case"end":return e.stop()}}),e)})),l=Object(g.a)(t);case 9:return e.next=11,l.next();case 11:return p=e.sent,n=p.done,e.next=15,p.value;case 15:if(d=e.sent,n){e.next=21;break}return e.delegateYield(o(),"t0",18);case 18:n=!0,e.next=9;break;case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(6),a=!0,i=e.t1;case 27:if(e.prev=27,e.prev=28,n||null==l.return){e.next=32;break}return e.next=32,l.return();case 32:if(e.prev=32,!a){e.next=35;break}throw i;case 35:return e.finish(32);case 36:return e.finish(27);case 37:case"end":return e.stop()}}),e,null,[[6,23,27,37],[28,,32,36]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){0!==c.length&&(s("creating JSON object for output..."),q().then((function(){return _(!1)})))}),[c]),Object(n.useEffect)((function(){}),[j]),Object(n.useEffect)((function(){!1===y&&(s("fetching finished..."),e.current.value=JSON.stringify(l))}),[y]),Object(o.jsxs)("div",{className:"output-container",children:[Object(o.jsx)("h3",{children:"Output JSON"}),Object(o.jsx)("textarea",{ref:e})]})},_=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)(b,{}),Object(o.jsx)(d,{})]}),Object(o.jsx)("div",{className:"col",children:Object(o.jsx)(y,{})})]})};s.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(l,{children:Object(o.jsx)(_,{})})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.da2e23fd.chunk.js.map